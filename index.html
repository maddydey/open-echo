function processContent(text) {
    if (!text) return { text: '', extra: '' };
    let extraHtml = '';
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    
    // 1. YouTube –≤—Å—ë —Ç–∞–∫ –∂–µ –≤ –ø–ª–µ–µ—Ä
    const youtubeRegex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/;
    const ytMatch = text.match(youtubeRegex);
    if (ytMatch) {
        extraHtml += `<div style="margin-top:12px; position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:14px; background:#000;"><iframe style="position:absolute; top:0; left:0; width:100%; height:100%; border:0;" src="https://www.youtube.com/embed/${ytMatch[1]}" allowfullscreen></iframe></div>`;
    }

    // 2. –î–µ–ª–∞–µ–º —Å—Å—ã–ª–∫–∏ –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –∏ –∫—Ä–∞—Å–∏–≤—ã–º–∏ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞
    const linkedText = text.replace(urlRegex, (url) => {
        let displayUrl = url.replace(/^https?:\/\//, '').replace(/^www\./, '');
        if (displayUrl.length > 30) displayUrl = displayUrl.substring(0, 27) + '...'; // –û–±—Ä–µ–∑–∞–µ–º —Ö–≤–æ—Å—Ç
        return `<a href="${url}" target="_blank" style="color:var(--accent); text-decoration:none; font-weight:600;">üîó ${displayUrl}</a>`;
    });

    // 3. –ö—Ä–∞—Å–∏–≤–æ–µ –º–∏–Ω–∏-–æ–∫–æ—à–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —Å—Å—ã–ª–∫–∏ (–µ—Å–ª–∏ –Ω–µ YouTube)
    const allUrls = text.match(urlRegex);
    if (allUrls && !ytMatch) {
        const firstUrl = allUrls[0];
        let siteName = firstUrl.split('/')[2].replace('www.', ''); // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä. samsung.com)
        extraHtml += `
        <a href="${firstUrl}" target="_blank" class="link-preview-box">
            <div class="link-icon">üåê</div>
            <div class="link-info">
                <span class="link-url">${siteName}</span>
                <span class="link-hint">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</span>
            </div>
        </a>`;
    }

    return { text: linkedText, extra: extraHtml };
}
