<style>
/* УМНОЕ МАСШТАБИРОВАНИЕ И ФОКУС */
.post-container {
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease;
    will-change: transform;
}

/* Эффект при нажатии на пост */
.post-container:active {
    transform: scale(0.97); /* Легкое сжатие при тапе для тактильности */
}

/* Если пост в фокусе (например, через JS добавим класс) */
.post-container.focused {
    transform: scale(1.03);
    z-index: 100;
}

.post-card {
    transition: box-shadow 0.3s ease, border 0.3s ease;
}

/* Контент внутри карточки подстраивается под размер */
.post-content {
    font-size: 16px;
    line-height: 1.5;
    word-wrap: break-word;
    transition: font-size 0.2s ease;
}

/* Масштабирование картинок */
.post-image {
    width: 100%;
    height: auto;
    max-height: 60vh; /* Не дает картинке занять весь экран */
    object-fit: contain; /* Чтобы видеть фото целиком */
    background: #000;
    border-radius: 20px;
    margin-top: 15px;
    transition: transform 0.3s ease;
}

/* Улучшенное отражение для масштабируемых постов */
.post-card::after {
    transition: opacity 0.3s ease, transform 0.3s ease;
}
</style>

<script>
// Добавляем обработку фокуса для удобства
function setupSmartScaling() {
    const containers = document.querySelectorAll('.post-container');
    containers.forEach(container => {
        container.addEventListener('touchstart', () => {
            // Убираем фокус со всех
            containers.forEach(c => {
                c.style.opacity = '0.5';
                c.classList.remove('focused');
            });
            // Даем фокус текущему
            container.style.opacity = '1';
            container.classList.add('focused');
            haptic.impactOccurred('light');
        });
    });

    // Сброс фокуса при тапе по пустому месту ленты
    document.getElementById('feed').addEventListener('touchstart', (e) => {
        if (e.target.id === 'feed') {
            containers.forEach(c => {
                c.style.opacity = '1';
                c.classList.remove('focused');
            });
        }
    }, {passive: true});
}

// Вызываем после каждого рендера
function render(data) {
    // ... твой код рендера ...
    // В конце добавляем:
    setTimeout(setupSmartScaling, 100);
}
</script>
